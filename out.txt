+ set -euo pipefail
+ shopt -s inherit_errexit
+ readonly VERSION=1.0.0
+ VERSION=1.0.0
++ basename ./falaigenerateimage
+ readonly SCRIPT_NAME=falaigenerateimage
+ SCRIPT_NAME=falaigenerateimage
+ readonly POLL_INTERVAL=5
+ POLL_INTERVAL=5
+ readonly MAX_RETRIES=60
+ MAX_RETRIES=60
+ temp_file=
+++ dirname ./falaigenerateimage
++ cd .
++ pwd -P
+ readonly SCRIPT_DIR=/home/linusjf/RIAY
+ SCRIPT_DIR=/home/linusjf/RIAY
+ source /home/linusjf/RIAY/lib/require.sh
++ [[ -z /home/linusjf/RIAY ]]
++ [[ -f /home/linusjf/RIAY/lib/util.sh ]]
++ source /home/linusjf/RIAY/lib/util.sh
+++ declare -f out
+++ export -f out
+++ declare -f err
+++ export -f err
+++ declare -f warn
+++ export -f warn
+++ declare -f die
+++ export -f die
+++ declare -f big
+++ export -f big
+++ declare -f log
+++ export -f log
+++ declare -f now
+++ export -f now
+++ declare -f sec
+++ export -f sec
+++ declare -f zid
+++ export -f zid
+++ declare -f cmd
+++ export -f cmd
+++ declare -f assert_empty
+++ export -f assert_empty
+++ declare -f assert_equal
+++ export -f assert_equal
+++ declare -f temp_home
+++ export -f temp_home
+++ declare -f temp_dir
+++ export -f temp_dir
+++ declare -f program
+++ export -f program
++ declare -f require_commands
++ export -f require_commands
++ declare -f require_vars
++ export -f require_vars
++ declare -f require_functions
++ export -f require_functions
+ source /home/linusjf/RIAY/lib/internet.sh
++ declare -f internet::checkinternet
++ export -f internet::checkinternet
+ source /home/linusjf/RIAY/lib/util.sh
++ declare -f out
++ declare -f err
++ declare -f warn
++ declare -f die
++ declare -f big
++ declare -f log
++ declare -f now
++ declare -f sec
++ declare -f zid
++ declare -f cmd
++ declare -f assert_empty
++ declare -f assert_equal
++ declare -f temp_home
++ declare -f temp_dir
++ declare -f program
+ source /home/linusjf/RIAY/lib/curl.sh
++ set -o errexit
++ set -o nounset
++ set -o pipefail
++ [[ -z /home/linusjf/RIAY ]]
++ source /home/linusjf/RIAY/lib/require.sh
+++ [[ -z /home/linusjf/RIAY ]]
+++ [[ -f /home/linusjf/RIAY/lib/util.sh ]]
+++ source /home/linusjf/RIAY/lib/util.sh
++++ declare -f out
++++ declare -f err
++++ declare -f warn
++++ declare -f die
++++ declare -f big
++++ declare -f log
++++ declare -f now
++++ declare -f sec
++++ declare -f zid
++++ declare -f cmd
++++ declare -f assert_empty
++++ declare -f assert_equal
++++ declare -f temp_home
++++ declare -f temp_dir
++++ declare -f program
+++ declare -f require_commands
+++ declare -f require_vars
+++ declare -f require_functions
++ require_commands curl sed cat rm date head tail basename mktemp grep cut tr
++ for cmd in "$@"
++ command -v curl
++ for cmd in "$@"
++ command -v sed
++ for cmd in "$@"
++ command -v cat
++ for cmd in "$@"
++ command -v rm
++ for cmd in "$@"
++ command -v date
++ for cmd in "$@"
++ command -v head
++ for cmd in "$@"
++ command -v tail
++ for cmd in "$@"
++ command -v basename
++ for cmd in "$@"
++ command -v mktemp
++ for cmd in "$@"
++ command -v grep
++ for cmd in "$@"
++ command -v cut
++ for cmd in "$@"
++ command -v tr
++ : 3
++ : 1
++ : 30
++ : 90
++ declare -p curl__HTTP_STATUS_CODES
++ curl__HTTP_STATUS_CODES=(['000']='No Response - Unable to connect/Network error' ['100']='Continue' ['101']='Switching Protocols' ['102']='Processing' ['103']='Early Hints' ['200']='OK' ['201']='Created' ['202']='Accepted' ['203']='Non-Authoritative Information' ['204']='No Content' ['205']='Reset Content' ['206']='Partial Content' ['207']='Multi-Status' ['208']='Already Reported' ['218']='This is fine' ['226']='IM Used' ['300']='Multiple Choices' ['301']='Moved Permanently' ['302']='Found' ['303']='See Other' ['304']='Not Modified' ['305']='Use Proxy' ['307']='Temporary Redirect' ['308']='Permanent Redirect' ['400']='Bad Request/Invalid Argument/Failed Precondition' ['401']='Unauthorized/Authentication Fails' ['402']='Payment Required/Insufficient Balance' ['403']='Forbidden/Permission Denied' ['404']='Not Found' ['405']='Method Not Allowed' ['406']='Not Acceptable' ['407']='Proxy Authentication Required' ['408']='Request Timeout' ['409']='Conflict' ['410']='Gone' ['411']='Length Required' ['412']='Precondition Failed' ['413']='Payload Too Large' ['414']='URI Too Long' ['415']='Unsupported Media Type' ['416']='Range Not Satisfiable' ['417']='Expectation Failed' ['418']='I'\''m a teapot' ['419']='Page Expired' ['420']='Method Failure/Enhance Your Calm' ['421']='Misdirected Request' ['422']='Unprocessable Entity/Invalid Parameters' ['423']='Locked' ['424']='Failed Dependency' ['425']='Too Early' ['426']='Upgrade Required' ['428']='Precondition Required' ['429']='Too Many Requests/Resource Exhausted/Rate Limit Reached' ['430']='Request Header Fields Too Large/Shopify Security Rejection' ['431']='Request Header Fields Too Large' ['440']='Login Time-out' ['444']='No Response' ['449']='Retry With' ['450']='Blocked By Windows Parental Controls' ['451']='Unavailable For Legal Reasons/Redirect' ['460']='Client closed the connection with the load balancer before the idle timeout period elapsed. Typically, when client timeout is sooner than the Elastic Load Balancer'\''s timeout' ['463']='The load balancer received an X-Forwarded-For request header with more than 30 IP addresses' ['464']='Incompatible protocol versions between Client and Origin server' ['494']='Request header too large' ['495']='SSL Certificate Error' ['496']='SSL Certificate Required' ['497']='HTTP Request Sent To HTTPS Port' ['498']='Invalid Token' ['499']='Token Required/Client Closed Request' ['500']='Internal Server Error' ['501']='Not Implemented' ['502']='Bad Gateway' ['503']='Service Unavailable/Server Overloaded' ['504']='Gateway Timeout/Deadline Exceeded' ['505']='HTTP Version Not Supported' ['506']='Variant Also Negotiates' ['507']='Insufficient Storage' ['508']='Loop Detected' ['509']='Bandwidth Limit Exceeded' ['510']='Not Extended' ['511']='Network Authentication Required' ['520']='Web Server Returned an Unknown Error' ['521']='Web Server Is Down' ['522']='Connection Timed Out' ['523']='Origin Is Unreachable' ['524']='A Timeout Occurred' ['525']='SSL Handshake Failed' ['526']='Invalid SSL Certificate' ['529']='Site is overloaded' ['530']='Site is frozen/Origin DNS Error/Error 530' ['540']='Temporarily disabled' ['561']='Unauthorized' ['598']='Network read timeout error' ['599']='Network connect timeout error' ['783']='Unexpected token' ['999']='Non-standard')
++ declare -A curl__HTTP_STATUS_CODES
++ declare -f curl::redact_keys
++ export -f curl::redact_keys
++ declare -f curl::save_failed_response
++ export -f curl::save_failed_response
++ declare -f curl::safe_curl_request
++ export -f curl::safe_curl_request
++ [[ /home/linusjf/RIAY/lib/curl.sh == \.\/\f\a\l\a\i\g\e\n\e\r\a\t\e\i\m\a\g\e ]]
+ source /home/linusjf/RIAY/lib/lockconfig.sh
++ [[ -z /home/linusjf/RIAY ]]
++ source /home/linusjf/RIAY/lib/require.sh
+++ [[ -z /home/linusjf/RIAY ]]
+++ [[ -f /home/linusjf/RIAY/lib/util.sh ]]
+++ source /home/linusjf/RIAY/lib/util.sh
++++ declare -f out
++++ declare -f err
++++ declare -f warn
++++ declare -f die
++++ declare -f big
++++ declare -f log
++++ declare -f now
++++ declare -f sec
++++ declare -f zid
++++ declare -f cmd
++++ declare -f assert_empty
++++ declare -f assert_equal
++++ declare -f temp_home
++++ declare -f temp_dir
++++ declare -f program
+++ declare -f require_commands
+++ declare -f require_vars
+++ declare -f require_functions
++ declare -f lockconfig::lock_config_vars
++ export -f lockconfig::lock_config_vars
+ lockconfig::lock_config_vars /home/linusjf/RIAY/config.env
+ require_commands compgen grep comm
+ for cmd in "$@"
+ command -v compgen
+ for cmd in "$@"
+ command -v grep
+ for cmd in "$@"
+ command -v comm
+ local config_file=/home/linusjf/RIAY/config.env
+ local before_vars after_vars config_vars var
++ compgen -v
+ before_vars='ANDROID_DATA
ANDROID_ROOT
ANT_HOME
ANT_OPTS
BASH
BASHOPTS
BASHPID
BASH_ALIASES
BASH_ARGC
BASH_ARGV
BASH_ARGV0
BASH_CMDS
BASH_COMMAND
BASH_LINENO
BASH_LOADABLES_PATH
BASH_SOURCE
BASH_SUBSHELL
BASH_VERSINFO
BASH_VERSION
BOOTCLASSPATH
CLASSPATH
COMP_WORDBREAKS
CURL_CONNECT_TIMEOUT
CURL_INITIAL_RETRY_DELAY
CURL_MAX_RETRIES
CURL_MAX_TIME
DBUS_SESSION_BUS_ADDRESS
DEEPINFRA_TOKEN
DEEPSEEK_API_KEY
DIRSTACK
DISPLAY
DOWNLOAD_STATIC_LIBV8
EDITOR
EPOCHREALTIME
EPOCHSECONDS
EUID
FALAI_KEY
FUNCNAME
GCC_COLORS
GEMINI_API_KEY
GITGUARDIAN_API_KEY
GITHUB_USERNAME
GIT_EXCLUDES_FILES
GIT_HOOKS_PATH
GPG_TTY
GROUPS
HISTCMD
HISTFILESIZE
HISTSIZE
HOME
HOSTNAME
HOSTTYPE
IFS
IVY_HOME
LANG
LANGUAGE
LC_ADDRESS
LC_COLLATE
LC_CTYPE
LC_IDENTIFICATION
LC_MEASUREMENT
LC_MESSAGES
LC_MONETARY
LC_NAME
LC_NUMERIC
LC_PAPER
LC_TELEPHONE
LC_TIME
LESSCLOSE
LESSOPEN
LINENO
LOGNAME
LS_COLORS
MACHTYPE
MAVEN_OPTS
MAX_RETRIES
MOZ_FAKE_NO_SANDBOX
NAME
NODE_PATH
NVIM_PYTHON_LOG_FILE
NVIM_PYTHON_LOG_LEVEL
NVM_DIR
OLDPWD
OMPI_ALLOW_RUN_AS_ROOT
OMPI_ALLOW_RUN_AS_ROOT_CONFIRM
OPENROUTER_API_KEY
OPTERR
OPTIND
OSTYPE
PAGER
PATH
PIPESTATUS
PKG_CONFIG_PATH
POLL_INTERVAL
PPID
PS4
PULSE_SERVER
PWD
PYENV_ROOT
PYENV_SHELL
PYENV_VIRTUALENV_INIT
PYTHON3_HOST_PROG
PYTHONASYNCIODEBUG
RANDOM
RTD_TOKEN
SCRIPT_DIR
SCRIPT_NAME
SDKMAN_CANDIDATES_API
SDKMAN_CANDIDATES_DIR
SDKMAN_DIR
SDKMAN_PLATFORM
SECONDS
SHELL
SHELLOPTS
SHLVL
SRANDOM
TEMP_DIR
TERM
TERMUX
TZ
TZDIR
UID
USER
USR
VERSION
WARP_ENABLE_WAYLAND
WAYLAND_DISPLAY
WSL2_GUI_APPS_ENABLED
WSLENV
WSL_DISTRO_NAME
WSL_INTEROP
XDG_DATA_DIRS
XDG_RUNTIME_DIR
YOUTUBE_API_KEY
_
cmd
config_file
curl__HTTP_STATUS_CODES
temp_file'
+ source /home/linusjf/RIAY/config.env
++ PROJECT='Rosary In A Year (RIAY)'
++ LOGGING=false
++ YEAR=2025
++ REPO_OWNER=linusjf
++ REPO_NAME=RIAY
++ ICON_FILE=play-button.png
++ ICON_SIZE=256x256
++ ICON_OFFSET=+32+0
++ ICON_COMMENT='Play Icon Added'
++ COMPACT_FILE=compact.txt
++ VIDEOS_FILE=videos.txt
++ GAP_BW_REQS=10
++ CURL_MAX_RETRIES=5
++ CURL_INITIAL_RETRY_DELAY=2
++ CURL_CONNECT_TIMEOUT=30
++ CURL_MAX_TIME=90
++ TEMPERATURE=0.5
++ GEMINI_MODELS=()
++ SYSTEM_SUMMARY_PROMPT='You are a helpful assistant that summarizes content. Be concise, helpful.'
++ CHUNK_SUMMARY_PROMPT='Summarize this text, excluding plugs, branding, and promotions. Avoid mention of Day, podcast and Rosary in a Day:'
++ FINAL_SUMMARY_PROMPT='Summarize the following text in the voice and style of C.S. Lewis, employing his clarity, moral insight, and rhetorical flair, as if writing directly to an intelligent but unassuming reader. Generate a title as well. Avoid modern jargon, maintain a tone of gentle conviction, and present the ideas as timeless truths. Do not include any meta-commentary, footnotes, or explanations. Start with a level three markdown header
'\''### AI-Generated Summary: '\''. Append your generated title (no colons, proper grammar) to the header.'
++ SUMMARY_IMAGE_META_PROMPT='You are an assistant that extracts visual meaning from text. Given any descriptive input, generate:
1. "image_prompt" – a detailed, visual description suitable for generating an image.
2. "caption" – a brief, expressive caption that summarizes or enhances the image concept. No colons.
Return your response as a JSON object in the format: {"caption": "This is the generated caption", "image_prompt": "This is the image prompt."}'
++ CONTENT_DOCS=("RIAY=start.md" "January=January.md" "February=February.md" "March=March.md" "April=April.md" "May=May.md" "June=June.md" "July=July.md" "August=August.md" "September=September.md" "October=October.md" "November=November.md" "December=December.md")
++ AUTO_GENERATE_IMAGES=false
++ IMAGE_GENERATION_MODEL=stabilityai/sd3.5
++ compgen -v
+ after_vars='ANDROID_DATA
ANDROID_ROOT
ANT_HOME
ANT_OPTS
AUTO_GENERATE_IMAGES
BASH
BASHOPTS
BASHPID
BASH_ALIASES
BASH_ARGC
BASH_ARGV
BASH_ARGV0
BASH_CMDS
BASH_COMMAND
BASH_LINENO
BASH_LOADABLES_PATH
BASH_SOURCE
BASH_SUBSHELL
BASH_VERSINFO
BASH_VERSION
BOOTCLASSPATH
CHUNK_SUMMARY_PROMPT
CLASSPATH
COMPACT_FILE
COMP_WORDBREAKS
CONTENT_DOCS
CURL_CONNECT_TIMEOUT
CURL_INITIAL_RETRY_DELAY
CURL_MAX_RETRIES
CURL_MAX_TIME
DBUS_SESSION_BUS_ADDRESS
DEEPINFRA_TOKEN
DEEPSEEK_API_KEY
DIRSTACK
DISPLAY
DOWNLOAD_STATIC_LIBV8
EDITOR
EPOCHREALTIME
EPOCHSECONDS
EUID
FALAI_KEY
FINAL_SUMMARY_PROMPT
FUNCNAME
GAP_BW_REQS
GCC_COLORS
GEMINI_API_KEY
GEMINI_MODELS
GITGUARDIAN_API_KEY
GITHUB_USERNAME
GIT_EXCLUDES_FILES
GIT_HOOKS_PATH
GPG_TTY
GROUPS
HISTCMD
HISTFILESIZE
HISTSIZE
HOME
HOSTNAME
HOSTTYPE
ICON_COMMENT
ICON_FILE
ICON_OFFSET
ICON_SIZE
IFS
IMAGE_GENERATION_MODEL
IVY_HOME
LANG
LANGUAGE
LC_ADDRESS
LC_COLLATE
LC_CTYPE
LC_IDENTIFICATION
LC_MEASUREMENT
LC_MESSAGES
LC_MONETARY
LC_NAME
LC_NUMERIC
LC_PAPER
LC_TELEPHONE
LC_TIME
LESSCLOSE
LESSOPEN
LINENO
LOGGING
LOGNAME
LS_COLORS
MACHTYPE
MAVEN_OPTS
MAX_RETRIES
MOZ_FAKE_NO_SANDBOX
NAME
NODE_PATH
NVIM_PYTHON_LOG_FILE
NVIM_PYTHON_LOG_LEVEL
NVM_DIR
OLDPWD
OMPI_ALLOW_RUN_AS_ROOT
OMPI_ALLOW_RUN_AS_ROOT_CONFIRM
OPENROUTER_API_KEY
OPTERR
OPTIND
OSTYPE
PAGER
PATH
PIPESTATUS
PKG_CONFIG_PATH
POLL_INTERVAL
PPID
PROJECT
PS4
PULSE_SERVER
PWD
PYENV_ROOT
PYENV_SHELL
PYENV_VIRTUALENV_INIT
PYTHON3_HOST_PROG
PYTHONASYNCIODEBUG
RANDOM
REPO_NAME
REPO_OWNER
RTD_TOKEN
SCRIPT_DIR
SCRIPT_NAME
SDKMAN_CANDIDATES_API
SDKMAN_CANDIDATES_DIR
SDKMAN_DIR
SDKMAN_PLATFORM
SECONDS
SHELL
SHELLOPTS
SHLVL
SRANDOM
SUMMARY_IMAGE_META_PROMPT
SYSTEM_SUMMARY_PROMPT
TEMPERATURE
TEMP_DIR
TERM
TERMUX
TZ
TZDIR
UID
USER
USR
VERSION
VIDEOS_FILE
WARP_ENABLE_WAYLAND
WAYLAND_DISPLAY
WSL2_GUI_APPS_ENABLED
WSLENV
WSL_DISTRO_NAME
WSL_INTEROP
XDG_DATA_DIRS
XDG_RUNTIME_DIR
YEAR
YOUTUBE_API_KEY
_
before_vars
cmd
config_file
curl__HTTP_STATUS_CODES
temp_file'
++ comm -13 /dev/fd/63 /dev/fd/62
+++ sort
+++ echo 'ANDROID_DATA
ANDROID_ROOT
ANT_HOME
ANT_OPTS
AUTO_GENERATE_IMAGES
BASH
BASHOPTS
BASHPID
BASH_ALIASES
BASH_ARGC
BASH_ARGV
BASH_ARGV0
BASH_CMDS
BASH_COMMAND
BASH_LINENO
BASH_LOADABLES_PATH
BASH_SOURCE
BASH_SUBSHELL
BASH_VERSINFO
BASH_VERSION
BOOTCLASSPATH
CHUNK_SUMMARY_PROMPT
CLASSPATH
COMPACT_FILE
COMP_WORDBREAKS
CONTENT_DOCS
CURL_CONNECT_TIMEOUT
CURL_INITIAL_RETRY_DELAY
CURL_MAX_RETRIES
CURL_MAX_TIME
DBUS_SESSION_BUS_ADDRESS
DEEPINFRA_TOKEN
DEEPSEEK_API_KEY
DIRSTACK
DISPLAY
DOWNLOAD_STATIC_LIBV8
EDITOR
EPOCHREALTIME
EPOCHSECONDS
EUID
FALAI_KEY
FINAL_SUMMARY_PROMPT
FUNCNAME
GAP_BW_REQS
GCC_COLORS
GEMINI_API_KEY
GEMINI_MODELS
GITGUARDIAN_API_KEY
GITHUB_USERNAME
GIT_EXCLUDES_FILES
GIT_HOOKS_PATH
GPG_TTY
GROUPS
HISTCMD
HISTFILESIZE
HISTSIZE
HOME
HOSTNAME
HOSTTYPE
ICON_COMMENT
ICON_FILE
ICON_OFFSET
ICON_SIZE
IFS
IMAGE_GENERATION_MODEL
IVY_HOME
LANG
LANGUAGE
LC_ADDRESS
LC_COLLATE
LC_CTYPE
LC_IDENTIFICATION
LC_MEASUREMENT
LC_MESSAGES
LC_MONETARY
LC_NAME
LC_NUMERIC
LC_PAPER
LC_TELEPHONE
LC_TIME
LESSCLOSE
LESSOPEN
LINENO
LOGGING
LOGNAME
LS_COLORS
MACHTYPE
MAVEN_OPTS
MAX_RETRIES
MOZ_FAKE_NO_SANDBOX
NAME
NODE_PATH
NVIM_PYTHON_LOG_FILE
NVIM_PYTHON_LOG_LEVEL
NVM_DIR
OLDPWD
OMPI_ALLOW_RUN_AS_ROOT
OMPI_ALLOW_RUN_AS_ROOT_CONFIRM
OPENROUTER_API_KEY
OPTERR
OPTIND
OSTYPE
PAGER
PATH
PIPESTATUS
PKG_CONFIG_PATH
POLL_INTERVAL
PPID
PROJECT
PS4
PULSE_SERVER
PWD
PYENV_ROOT
PYENV_SHELL
PYENV_VIRTUALENV_INIT
PYTHON3_HOST_PROG
PYTHONASYNCIODEBUG
RANDOM
REPO_NAME
REPO_OWNER
RTD_TOKEN
SCRIPT_DIR
SCRIPT_NAME
SDKMAN_CANDIDATES_API
SDKMAN_CANDIDATES_DIR
SDKMAN_DIR
SDKMAN_PLATFORM
SECONDS
SHELL
SHELLOPTS
SHLVL
SRANDOM
SUMMARY_IMAGE_META_PROMPT
SYSTEM_SUMMARY_PROMPT
TEMPERATURE
TEMP_DIR
TERM
TERMUX
TZ
TZDIR
UID
USER
USR
VERSION
VIDEOS_FILE
WARP_ENABLE_WAYLAND
WAYLAND_DISPLAY
WSL2_GUI_APPS_ENABLED
WSLENV
WSL_DISTRO_NAME
WSL_INTEROP
XDG_DATA_DIRS
XDG_RUNTIME_DIR
YEAR
YOUTUBE_API_KEY
_
before_vars
cmd
config_file
curl__HTTP_STATUS_CODES
temp_file'
+++ echo 'ANDROID_DATA
ANDROID_ROOT
ANT_HOME
ANT_OPTS
BASH
BASHOPTS
BASHPID
BASH_ALIASES
BASH_ARGC
BASH_ARGV
BASH_ARGV0
BASH_CMDS
+++ sort
BASH_COMMAND
BASH_LINENO
BASH_LOADABLES_PATH
BASH_SOURCE
BASH_SUBSHELL
BASH_VERSINFO
BASH_VERSION
BOOTCLASSPATH
CLASSPATH
COMP_WORDBREAKS
CURL_CONNECT_TIMEOUT
CURL_INITIAL_RETRY_DELAY
CURL_MAX_RETRIES
CURL_MAX_TIME
DBUS_SESSION_BUS_ADDRESS
DEEPINFRA_TOKEN
DEEPSEEK_API_KEY
DIRSTACK
DISPLAY
DOWNLOAD_STATIC_LIBV8
EDITOR
EPOCHREALTIME
EPOCHSECONDS
EUID
FALAI_KEY
FUNCNAME
GCC_COLORS
GEMINI_API_KEY
GITGUARDIAN_API_KEY
GITHUB_USERNAME
GIT_EXCLUDES_FILES
GIT_HOOKS_PATH
GPG_TTY
GROUPS
HISTCMD
HISTFILESIZE
HISTSIZE
HOME
HOSTNAME
HOSTTYPE
IFS
IVY_HOME
LANG
LANGUAGE
LC_ADDRESS
LC_COLLATE
LC_CTYPE
LC_IDENTIFICATION
LC_MEASUREMENT
LC_MESSAGES
LC_MONETARY
LC_NAME
LC_NUMERIC
LC_PAPER
LC_TELEPHONE
LC_TIME
LESSCLOSE
LESSOPEN
LINENO
LOGNAME
LS_COLORS
MACHTYPE
MAVEN_OPTS
MAX_RETRIES
MOZ_FAKE_NO_SANDBOX
NAME
NODE_PATH
NVIM_PYTHON_LOG_FILE
NVIM_PYTHON_LOG_LEVEL
NVM_DIR
OLDPWD
OMPI_ALLOW_RUN_AS_ROOT
OMPI_ALLOW_RUN_AS_ROOT_CONFIRM
OPENROUTER_API_KEY
OPTERR
OPTIND
OSTYPE
PAGER
PATH
PIPESTATUS
PKG_CONFIG_PATH
POLL_INTERVAL
PPID
PS4
PULSE_SERVER
PWD
PYENV_ROOT
PYENV_SHELL
PYENV_VIRTUALENV_INIT
PYTHON3_HOST_PROG
PYTHONASYNCIODEBUG
RANDOM
RTD_TOKEN
SCRIPT_DIR
SCRIPT_NAME
SDKMAN_CANDIDATES_API
SDKMAN_CANDIDATES_DIR
SDKMAN_DIR
SDKMAN_PLATFORM
SECONDS
SHELL
SHELLOPTS
SHLVL
SRANDOM
TEMP_DIR
TERM
TERMUX
TZ
TZDIR
UID
USER
USR
VERSION
WARP_ENABLE_WAYLAND
WAYLAND_DISPLAY
WSL2_GUI_APPS_ENABLED
WSLENV
WSL_DISTRO_NAME
WSL_INTEROP
XDG_DATA_DIRS
XDG_RUNTIME_DIR
YOUTUBE_API_KEY
_
cmd
config_file
curl__HTTP_STATUS_CODES
temp_file'
+ config_vars='AUTO_GENERATE_IMAGES
before_vars
CHUNK_SUMMARY_PROMPT
COMPACT_FILE
CONTENT_DOCS
FINAL_SUMMARY_PROMPT
GAP_BW_REQS
GEMINI_MODELS
ICON_COMMENT
ICON_FILE
ICON_OFFSET
ICON_SIZE
IMAGE_GENERATION_MODEL
LOGGING
PROJECT
REPO_NAME
REPO_OWNER
SUMMARY_IMAGE_META_PROMPT
SYSTEM_SUMMARY_PROMPT
TEMPERATURE
VIDEOS_FILE
YEAR'
+ for var in $config_vars
+ declare -p AUTO_GENERATE_IMAGES
+ for var in $config_vars
+ declare -p before_vars
+ for var in $config_vars
+ declare -p CHUNK_SUMMARY_PROMPT
+ for var in $config_vars
+ declare -p COMPACT_FILE
+ for var in $config_vars
+ declare -p CONTENT_DOCS
+ for var in $config_vars
+ declare -p FINAL_SUMMARY_PROMPT
+ for var in $config_vars
+ declare -p GAP_BW_REQS
+ for var in $config_vars
+ declare -p GEMINI_MODELS
+ for var in $config_vars
+ declare -p ICON_COMMENT
+ for var in $config_vars
+ declare -p ICON_FILE
+ for var in $config_vars
+ declare -p ICON_OFFSET
+ for var in $config_vars
+ declare -p ICON_SIZE
+ for var in $config_vars
+ declare -p IMAGE_GENERATION_MODEL
+ for var in $config_vars
+ declare -p LOGGING
+ for var in $config_vars
+ declare -p PROJECT
+ for var in $config_vars
+ declare -p REPO_NAME
+ for var in $config_vars
+ declare -p REPO_OWNER
+ for var in $config_vars
+ declare -p SUMMARY_IMAGE_META_PROMPT
+ for var in $config_vars
+ declare -p SYSTEM_SUMMARY_PROMPT
+ for var in $config_vars
+ declare -p TEMPERATURE
+ for var in $config_vars
+ declare -p VIDEOS_FILE
+ for var in $config_vars
+ declare -p YEAR
+ require_commands jq tee cat sed mktemp cp gm dirname basename
+ for cmd in "$@"
+ command -v jq
+ for cmd in "$@"
+ command -v tee
+ for cmd in "$@"
+ command -v cat
+ for cmd in "$@"
+ command -v sed
+ for cmd in "$@"
+ command -v mktemp
+ for cmd in "$@"
+ command -v cp
+ for cmd in "$@"
+ command -v gm
+ for cmd in "$@"
+ command -v dirname
+ for cmd in "$@"
+ command -v basename
+ [[ 1 -gt 0 ]]
+ case "$1" in
+ break
+ [[ ./falaigenerateimage == \.\/\f\a\l\a\i\g\e\n\e\r\a\t\e\i\m\a\g\e ]]
+ false
+ main 'Draw me an orange'
+ local 'input=Draw me an orange'
++ read_input 'Draw me an orange'
++ local 'input=Draw me an orange'
++ [[ -n Draw me an orange ]]
++ echo 'Draw me an orange'
+ prompt='Draw me an orange'
+ local request_id output_file
+ [[ -z 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef ]]
+ [[ -z Draw me an orange ]]
+ [[ false == \t\r\u\e ]]
++ generate_image 'Draw me an orange'
++ local 'prompt=Draw me an orange'
++ local escaped_prompt payload response request_id
+++ jq -Rs
++ escaped_prompt='"Draw me an orange\n"'
+++ jq -n --arg prompt '"Draw me an orange\n"' '{
    "prompt": $prompt
  }'
++ payload='{
  "prompt": "\"Draw me an orange\\n\""
}'
+++ curl::safe_curl_request https://queue.fal.run/fal-ai/janus POST 'Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef' '{
  "prompt": "\"Draw me an orange\\n\""
}'
+++ local url=https://queue.fal.run/fal-ai/janus
+++ local method=POST
+++ local 'headers=Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef'
+++ local 'data={
  "prompt": "\"Draw me an orange\\n\""
}'
+++ local output_file
++++ mktemp
+++ output_file=/tmp/tmp.J6AYWdLXQQ
+++ local retry_count=0
+++ local delay=2
+++ local status_code=0
+++ local response=
+++ [[ 0 -lt 5 ]]
+++ status_code=0
+++ response=
+++ curl_cmd=('curl' '--show-error' '--connect-timeout' '30' '--max-time' '90' '--fail-with-body' '--silent' '--write-out' '%{http_code}' '-D' '/dev/stdout' '-o' '/tmp/tmp.J6AYWdLXQQ')
+++ local curl_cmd
+++ [[ POST == \P\O\S\T ]]
+++ curl_cmd+=(-X "POST")
+++ [[ -n Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef ]]
+++ curl_cmd+=(-H "$headers")
+++ [[ -n {
  "prompt": "\"Draw me an orange\\n\""
} ]]
+++ curl_cmd+=(-d "$data")
+++ curl_cmd+=("$url")
+++ [[ false == \t\r\u\e ]]
+++ local curl_output
++++ curl --show-error --connect-timeout 30 --max-time 90 --fail-with-body --silent --write-out '%{http_code}' -D /dev/stdout -o /tmp/tmp.J6AYWdLXQQ -X POST -H 'Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef' -d '{
  "prompt": "\"Draw me an orange\\n\""
}' https://queue.fal.run/fal-ai/janus
+++ curl_output='HTTP/2 200 
date: Mon, 26 May 2025 08:29:47 GMT
content-type: application/json; charset=utf-8
content-length: 436
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

200'
++++ echo 'HTTP/2 200 
date: Mon, 26 May 2025 08:29:47 GMT
content-type: application/json; charset=utf-8
content-length: 436
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

200'
++++ tail -n 1
+++ status_code=200
++++ cat /tmp/tmp.J6AYWdLXQQ
+++ response='{"status": "IN_QUEUE", "request_id": "fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "response_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "status_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status", "cancel_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/cancel", "logs": null, "metrics": {}, "queue_position": 0}'
++++ echo 'HTTP/2 200 
date: Mon, 26 May 2025 08:29:47 GMT
content-type: application/json; charset=utf-8
content-length: 436
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

200'
++++ head -n -1
+++ local 'response_headers=HTTP/2 200 
date: Mon, 26 May 2025 08:29:47 GMT
content-type: application/json; charset=utf-8
content-length: 436
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex
'
+++ [[ 200 -ge 200 ]]
+++ [[ 200 -lt 300 ]]
+++ [[ false == \t\r\u\e ]]
+++ echo '{"status": "IN_QUEUE", "request_id": "fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "response_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "status_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status", "cancel_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/cancel", "logs": null, "metrics": {}, "queue_position": 0}'
+++ rm -f /tmp/tmp.J6AYWdLXQQ
+++ return 0
++ response='{"status": "IN_QUEUE", "request_id": "fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "response_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "status_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status", "cancel_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/cancel", "logs": null, "metrics": {}, "queue_position": 0}'
+++ echo '{"status": "IN_QUEUE", "request_id": "fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "response_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "status_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status", "cancel_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/cancel", "logs": null, "metrics": {}, "queue_position": 0}'
+++ jq -r .request_id
++ request_id=fee4c1fc-e8a2-46fc-844b-17a2f5237dae
++ printf '%s\n' fee4c1fc-e8a2-46fc-844b-17a2f5237dae
+ request_id=fee4c1fc-e8a2-46fc-844b-17a2f5237dae
+ poll_status fee4c1fc-e8a2-46fc-844b-17a2f5237dae
+ local request_id=fee4c1fc-e8a2-46fc-844b-17a2f5237dae
+ local attempt=1
+ local status response
+ (( attempt <= MAX_RETRIES ))
++ curl::safe_curl_request https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status GET 'Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef'
++ local url=https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status
++ local method=GET
++ local 'headers=Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef'
++ local data=
++ local output_file
+++ mktemp
++ output_file=/tmp/tmp.9dvp4ItVfQ
++ local retry_count=0
++ local delay=2
++ local status_code=0
++ local response=
++ [[ 0 -lt 5 ]]
++ status_code=0
++ response=
++ curl_cmd=('curl' '--show-error' '--connect-timeout' '30' '--max-time' '90' '--fail-with-body' '--silent' '--write-out' '%{http_code}' '-D' '/dev/stdout' '-o' '/tmp/tmp.9dvp4ItVfQ')
++ local curl_cmd
++ [[ GET == \P\O\S\T ]]
++ [[ -n Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef ]]
++ curl_cmd+=(-H "$headers")
++ [[ -n '' ]]
++ curl_cmd+=("$url")
++ [[ false == \t\r\u\e ]]
++ local curl_output
+++ curl --show-error --connect-timeout 30 --max-time 90 --fail-with-body --silent --write-out '%{http_code}' -D /dev/stdout -o /tmp/tmp.9dvp4ItVfQ -H 'Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef' https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status
++ curl_output='HTTP/2 200 
date: Mon, 26 May 2025 08:29:48 GMT
content-type: application/json; charset=utf-8
content-length: 453
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

200'
+++ echo 'HTTP/2 200 
date: Mon, 26 May 2025 08:29:48 GMT
content-type: application/json; charset=utf-8
content-length: 453
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

200'
+++ tail -n 1
++ status_code=200
+++ cat /tmp/tmp.9dvp4ItVfQ
++ response='{"status": "COMPLETED", "request_id": "fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "response_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "status_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status", "cancel_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/cancel", "logs": null, "metrics": {"inference_time": 0.08279705047607422}}'
+++ echo 'HTTP/2 200 
date: Mon, 26 May 2025 08:29:48 GMT
content-type: application/json; charset=utf-8
content-length: 453
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

200'
+++ head -n -1
++ local 'response_headers=HTTP/2 200 
date: Mon, 26 May 2025 08:29:48 GMT
content-type: application/json; charset=utf-8
content-length: 453
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex
'
++ [[ 200 -ge 200 ]]
++ [[ 200 -lt 300 ]]
++ [[ false == \t\r\u\e ]]
++ echo '{"status": "COMPLETED", "request_id": "fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "response_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "status_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status", "cancel_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/cancel", "logs": null, "metrics": {"inference_time": 0.08279705047607422}}'
++ rm -f /tmp/tmp.9dvp4ItVfQ
++ return 0
+ response='{"status": "COMPLETED", "request_id": "fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "response_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "status_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status", "cancel_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/cancel", "logs": null, "metrics": {"inference_time": 0.08279705047607422}}'
++ echo '{"status": "COMPLETED", "request_id": "fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "response_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae", "status_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/status", "cancel_url": "https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae/cancel", "logs": null, "metrics": {"inference_time": 0.08279705047607422}}'
++ jq -r .status
+ status=COMPLETED
+ case "$status" in
+ printf '\n'

+ return 0
++ download_image fee4c1fc-e8a2-46fc-844b-17a2f5237dae
++ local request_id=fee4c1fc-e8a2-46fc-844b-17a2f5237dae
++ local response response_url
+++ curl::safe_curl_request https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae GET 'Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef'
+++ local url=https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae
+++ local method=GET
+++ local 'headers=Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef'
+++ local data=
+++ local output_file
++++ mktemp
+++ output_file=/tmp/tmp.EUUeFpSEmx
+++ local retry_count=0
+++ local delay=2
+++ local status_code=0
+++ local response=
+++ [[ 0 -lt 5 ]]
+++ status_code=0
+++ response=
+++ curl_cmd=('curl' '--show-error' '--connect-timeout' '30' '--max-time' '90' '--fail-with-body' '--silent' '--write-out' '%{http_code}' '-D' '/dev/stdout' '-o' '/tmp/tmp.EUUeFpSEmx')
+++ local curl_cmd
+++ [[ GET == \P\O\S\T ]]
+++ [[ -n Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef ]]
+++ curl_cmd+=(-H "$headers")
+++ [[ -n '' ]]
+++ curl_cmd+=("$url")
+++ [[ false == \t\r\u\e ]]
+++ local curl_output
++++ curl --show-error --connect-timeout 30 --max-time 90 --fail-with-body --silent --write-out '%{http_code}' -D /dev/stdout -o /tmp/tmp.EUUeFpSEmx -H 'Authorization: Key 386cc9fc-646e-4417-b041-939029d7ea51:c4b411649e13d995a86a9d4e9f8392ef' https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae
++++ true
+++ curl_output='HTTP/2 422 
date: Mon, 26 May 2025 08:29:49 GMT
content-type: application/json
content-length: 201
x-fal-served-from: 8bc6aac2-3cc6-4953-824b-9d118959a8f8
x-fal-request-id: fee4c1fc-e8a2-46fc-844b-17a2f5237dae
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

curl: (22) The requested URL returned error: 422
422'
++++ echo 'HTTP/2 422 
date: Mon, 26 May 2025 08:29:49 GMT
content-type: application/json
content-length: 201
x-fal-served-from: 8bc6aac2-3cc6-4953-824b-9d118959a8f8
x-fal-request-id: fee4c1fc-e8a2-46fc-844b-17a2f5237dae
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

curl: (22) The requested URL returned error: 422
422'
++++ tail -n 1
+++ status_code=422
++++ cat /tmp/tmp.EUUeFpSEmx
+++ response='{"detail":[{"type":"model_attributes_type","loc":["body"],"msg":"Input should be a valid dictionary or object to extract fields from","input":"{\n  \"prompt\": \"\\\"Draw me an orange\\\\n\\\"\"\n}"}]}'
++++ echo 'HTTP/2 422 
date: Mon, 26 May 2025 08:29:49 GMT
content-type: application/json
content-length: 201
x-fal-served-from: 8bc6aac2-3cc6-4953-824b-9d118959a8f8
x-fal-request-id: fee4c1fc-e8a2-46fc-844b-17a2f5237dae
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

curl: (22) The requested URL returned error: 422
422'
++++ head -n -1
+++ local 'response_headers=HTTP/2 422 
date: Mon, 26 May 2025 08:29:49 GMT
content-type: application/json
content-length: 201
x-fal-served-from: 8bc6aac2-3cc6-4953-824b-9d118959a8f8
x-fal-request-id: fee4c1fc-e8a2-46fc-844b-17a2f5237dae
strict-transport-security: max-age=31536000; includeSubDomains
x-robots-tag: noindex

curl: (22) The requested URL returned error: 422'
+++ [[ 422 -ge 200 ]]
+++ [[ 422 -lt 300 ]]
+++ retry_count=1
+++ [[ 1 -lt 5 ]]
++++ basename https://queue.fal.run/fal-ai/janus/requests/fee4c1fc-e8a2-46fc-844b-17a2f5237dae
+++ curl::save_failed_response '' '{"detail":[{"type":"model_attributes_type","loc":["body"],"msg":"Input should be a valid dictionary or object to extract fields from","input":"{\n  \"prompt\": \"\\\"Draw me an orange\\\\n\\\"\"\n}"}]}' fee4c1fc-e8a2-46fc-844b-17a2f5237dae
+++ local data=
+++ local 'response={"detail":[{"type":"model_attributes_type","loc":["body"],"msg":"Input should be a valid dictionary or object to extract fields from","input":"{\n  \"prompt\": \"\\\"Draw me an orange\\\\n\\\"\"\n}"}]}'
+++ local endpoint=fee4c1fc-e8a2-46fc-844b-17a2f5237dae
+++ local timestamp
++++ date -u +%Y%m%d_%H%M%S
+++ timestamp=20250526_082848
++++ echo fee4c1fc-e8a2-46fc-844b-17a2f5237dae
++++ sed -E 's/(key=|Bearer )[^&"\}]*/REDACTED/g'
++++ sed 's/[^a-zA-Z0-9_-]/_/g'
+++ local sanitized_endpoint=fee4c1fc-e8a2-46fc-844b-17a2f5237dae
+++ local filename=failed_response_fee4c1fc-e8a2-46fc-844b-17a2f5237dae_20250526_082848.json
+++ curl::redact_keys ''
+++ local input=
+++ echo ''
+++ sed -E 's/(key=|Bearer )[^&"\}]*/REDACTED/g'
+++ curl::redact_keys '{"detail":[{"type":"model_attributes_type","loc":["body"],"msg":"Input should be a valid dictionary or object to extract fields from","input":"{\n  \"prompt\": \"\\\"Draw me an orange\\\\n\\\"\"\n}"}]}'
+++ local 'input={"detail":[{"type":"model_attributes_type","loc":["body"],"msg":"Input should be a valid dictionary or object to extract fields from","input":"{\n  \"prompt\": \"\\\"Draw me an orange\\\\n\\\"\"\n}"}]}'
+++ echo '{"detail":[{"type":"model_attributes_type","loc":["body"],"msg":"Input should be a valid dictionary or object to extract fields from","input":"{\n  \"prompt\": \"\\\"Draw me an orange\\\\n\\\"\"\n}"}]}'
+++ sed -E 's/(key=|Bearer )[^&"\}]*/REDACTED/g'
+++ err 'Saved failed response to failed_response_fee4c1fc-e8a2-46fc-844b-17a2f5237dae_20250526_082848.json (API keys redacted)'
+++ printf '%b\n' 'Saved failed response to failed_response_fee4c1fc-e8a2-46fc-844b-17a2f5237dae_20250526_082848.json (API keys redacted)'
Saved failed response to failed_response_fee4c1fc-e8a2-46fc-844b-17a2f5237dae_20250526_082848.json (API keys redacted)
+++ [[ 422 -ge 400 ]]
+++ [[ 422 -lt 500 ]]
+++ [[ 422 -ne 408 ]]
+++ [[ 422 -ne 429 ]]
+++ echo 'Request failed with status 422: Unprocessable Entity/Invalid Parameters, no retries...'
Request failed with status 422: Unprocessable Entity/Invalid Parameters, no retries...
+++ return 2
++ response=
++ die 'Failed to get final response' 4
++ msg='Failed to get final response'
++ exitcode=4
++ printf '%b\n' 'Failed to get final response'
Failed to get final response
++ exit 4
+ output_file=
